generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  SUPERADMIN
  CONTENT_ADMIN
  USER
}

model User {
  id         Int      @id @default(autoincrement())
  firstName  String
  lastName   String
  country    String
  email      String   @unique
  phone      String?
  password   String
  role       Role     @default(CONTENT_ADMIN)
  isApproved Boolean  @default(false)
  isBlocked  Boolean  @default(false)
  createdAt  DateTime @default(now())
  churches   Church[] @relation("createdBy")
}

model Church {
  id               Int      @id @default(autoincrement())
  name             String
  logoUrl          String?
  photos           String[]  @default([])
  country          String
  city             String
  province         String?
  neighborhood     String?
  addressReference String
  description      String
  phone1           String?
  phone2           String?
  email            String?
  socials          Json?
  lat              Float?
  lng              Float?
  isVisible        Boolean   @default(true)
  createdById      Int
  createdBy        User      @relation("createdBy", fields: [createdById], references: [id])
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt
}

model Announcement {
  id        Int      @id @default(autoincrement())
  title     String
  content   String
  language  String   @default("fr")
  startAt   DateTime @default(now())
  endAt     DateTime?
  createdBy Int
  createdAt DateTime @default(now())
}